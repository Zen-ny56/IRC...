void handle_mode_command(Client *client, char *channel_name, char *mode, char *param) {
    Channel *channel = find_channel(channel_name);

    if (!channel) {
        send_numeric(client, ERR_NOSUCHCHANNEL, channel_name, "No such channel");
        return;
    }

    if (!is_operator(client, channel) && mode_requires_privilege(mode)) {
        send_numeric(client, ERR_CHANOPRIVSNEEDED, channel_name, "You're not a channel operator");
        return;
    }

    if (strcmp(mode, "+o") == 0 && param) {
        Client *target = find_client(param);
        if (target && is_in_channel(target, channel)) {
            add_operator(target, channel);
            broadcast_mode_change(client, channel, mode, param);
        }
    } else if (strcmp(mode, "-o") == 0 && param) {
        Client *target = find_client(param);
        if (target && is_in_channel(target, channel)) {
            remove_operator(target, channel);
            broadcast_mode_change(client, channel, mode, param);
        }
    } else if (strcmp(mode, "+b") == 0 && param) {
        add_ban(client, channel, param);
        broadcast_mode_change(client, channel, mode, param);
    } else if (strcmp(mode, "-b") == 0 && param) {
        remove_ban(client, channel, param);
        broadcast_mode_change(client, channel, mode, param);
    } else {
        send_numeric(client, ERR_UNKNOWNMODE, mode, "Unknown mode");
    }
}
